<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Through the Breach Character Sheet</title>
    <link rel="stylesheet" href="/css/style.css">
    <script>
        let attackCounter = 0;
        let skillCounter = 0;

        // Add a new attack to the table
        function addAttack() {
            const attackTableBody = document.getElementById('attacks-body');

            const name = document.getElementById('new-attack-name').value;
            const av = document.getElementById('new-attack-av').value;
            const range = document.getElementById('new-attack-range').value;
            const damage = document.getElementById('new-attack-damage').value;
            const reload = document.getElementById('new-attack-reload').value;
            const special = document.getElementById('new-attack-special').value;

            const rowId = `attack-${attackCounter++}`;
            const newRow = document.createElement('tr');
            newRow.id = rowId;
            newRow.innerHTML = `
                <td><input type="text" name="attacks[${attackCounter}][name]" value="${name}" placeholder="Attack Name"></td>
                <td><input type="number" name="attacks[${attackCounter}][av]" value="${av}" placeholder="0"></td>
                <td><input type="text" name="attacks[${attackCounter}][range]" value="${range}" placeholder="Range"></td>
                <td><input type="text" name="attacks[${attackCounter}][damage]" value="${damage}" placeholder="Damage"></td>
                <td><input type="text" name="attacks[${attackCounter}][reload]" value="${reload}" placeholder="Reload"></td>
                <td><input type="text" name="attacks[${attackCounter}][special]" value="${special}" placeholder="Special"></td>
                <td><button type="button" onclick="removeRow('${rowId}')">Remove</button></td>
            `;
            attackTableBody.appendChild(newRow);

            // Clear input fields
            document.getElementById('new-attack-name').value = '';
            document.getElementById('new-attack-av').value = '';
            document.getElementById('new-attack-range').value = '';
            document.getElementById('new-attack-damage').value = '';
            document.getElementById('new-attack-reload').value = '';
            document.getElementById('new-attack-special').value = '';
        }

        // Add a new skill
        function addSkill() {
            const skillContainer = document.getElementById('skills-container');

            const skillId = `skill-${skillCounter++}`;
            const skillEntry = document.createElement('div');
            skillEntry.id = skillId;
            skillEntry.className = 'skill-entry';
            skillEntry.innerHTML = `
                <label>Skill Name:</label>
                <input type="text" name="skills[${skillCounter}][name]" placeholder="Enter Skill Name">

                <label>AV:</label>
                <input type="number" name="skills[${skillCounter}][av]" placeholder="0">

                <label>Aspect:</label>
                <input type="text" name="skills[${skillCounter}][aspect]" placeholder="Aspect">

                <button type="button" onclick="removeRow('${skillId}')">Remove</button>
            `;
            skillContainer.appendChild(skillEntry);
        }

        // Generic function to remove a row
        function removeRow(rowId) {
            const row = document.getElementById(rowId);
            row.remove();
        }
    </script>
</head>
<body>
    <div class="character-sheet">
        <header>
            <h1>Through the Breach Character Sheet</h1>
        </header>
        <form action="#" method="POST">
            <!-- Personal Info -->
            <section class="personal-info">
                <h2>Personal Info</h2>
                <div>
                    <label for="fated-name">Fated Name:</label>
                    <input type="text" id="fated-name" name="fated_name" placeholder="Enter Fated Name">
                </div>
                <div>
                    <label for="player-name">Player Name:</label>
                    <input type="text" id="player-name" name="player_name" placeholder="Enter Player Name">
                </div>
                <div>
                    <label for="current-pursuit">Current Pursuit:</label>
                    <input type="text" id="current-pursuit" name="current_pursuit" placeholder="Enter Current Pursuit">
                </div>
                <div>
                    <label for="station">Station:</label>
                    <input type="text" id="station" name="station" placeholder="Enter Station">
                </div>
            </section>

            <!-- Characteristics -->
            <section class="stats">
                <h2>Characteristics</h2>
                <div class="grid">
                    <div><label for="might">Might:</label> <input type="number" id="might" name="might" placeholder="0"></div>
                    <div><label for="grace">Grace:</label> <input type="number" id="grace" name="grace" placeholder="0"></div>
                    <div><label for="charm">Charm:</label> <input type="number" id="charm" name="charm" placeholder="0"></div>
                    <div><label for="defense">Defense:</label> <input type="number" id="defense" name="defense" placeholder="0"></div>
                    <div><label for="intellect">Intellect:</label> <input type="number" id="intellect" name="intellect" placeholder="0"></div>
                    <div><label for="speed">Speed:</label> <input type="number" id="speed" name="speed" placeholder="0"></div>
                    <div><label for="willpower">Willpower:</label> <input type="number" id="willpower" name="willpower" placeholder="0"></div>
                    <div><label for="cunning">Cunning:</label> <input type="number" id="cunning" name="cunning" placeholder="0"></div>
                </div>
            </section>

            <!-- Skills -->
            <section class="skills">
                <h2>Skills</h2>
                <div id="skills-container">
                    <!-- Dynamic skill entries will be added here -->
                </div>
                <button type="button" onclick="addSkill()">Add Skill</button>
            </section>

            <!-- Attacks -->
            <section class="attacks">
                <h2>Attacks</h2>
                <table>
                    <thead>
                        <tr>
                            <th>Name</th>
                            <th>AV</th>
                            <th>Range</th>
                            <th>Damage</th>
                            <th>Reload</th>
                            <th>Special</th>
                            <th>Actions</th>
                        </tr>
                    </thead>
                    <tbody id="attacks-body">
                        <!-- Dynamic attack rows will be added here -->
                    </tbody>
                    <tfoot>
                        <tr>
                            <td><input type="text" id="new-attack-name" placeholder="Attack Name"></td>
                            <td><input type="number" id="new-attack-av" placeholder="0"></td>
                            <td><input type="text" id="new-attack-range" placeholder="Range"></td>
                            <td><input type="text" id="new-attack-damage" placeholder="Damage"></td>
                            <td><input type="text" id="new-attack-reload" placeholder="Reload"></td>
                            <td><input type="text" id="new-attack-special" placeholder="Special"></td>
                            <td><button type="button" onclick="addAttack()">Add</button></td>
                        </tr>
                    </tfoot>
                </table>
            </section>

            <!-- Destiny Steps -->
            <section class="destiny-steps">
                <h2>Destiny Steps</h2>
                <div>
                    <label for="endeavor-card">Endeavor Card:</label>
                    <input type="text" id="endeavor-card" name="endeavor_card" placeholder="Endeavor Card">
                </div>
                <div>
                    <label for="mind-card">Mind Card:</label>
                    <input type="text" id="mind-card" name="mind_card" placeholder="Mind Card">
                </div>
                <div>
                    <label for="root-card">Root Card:</label>
                    <input type="text" id="root-card" name="root_card" placeholder="Root Card">
                </div>
                <div>
                    <label for="body-card">Body Card:</label>
                    <input type="text" id="body-card" name="body_card" placeholder="Body Card">
                </div>
                <div>
                    <label for="station-card">Station Card:</label>
                    <input type="text" id="station-card" name="station_card" placeholder="Station Card">
                </div>
            </section>

            <!-- Grimoire -->
            <section class="grimoire">
                <h2>Grimoire</h2>
                <textarea name="grimoire" rows="5" placeholder="Enter grimoire details"></textarea>
            </section>

            <button type="submit">Save Character</button>
        </form>
    </div>
</body>
</html>